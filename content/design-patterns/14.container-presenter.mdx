---
title: Container/Presenter Pattern
description: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UIë¥¼ ë¶„ë¦¬í•˜ì—¬ ìœ ì§€ë³´ìˆ˜ì„±ê³¼ ì¬ì‚¬ìš©ì„±ì„ ë†’ì´ëŠ” íŒ¨í„´ì— ëŒ€í•´ ì•Œì•„ë´…ë‹ˆë‹¤.
---

# Container/Presenter: ë¡œì§ê³¼ ë·°ì˜ ë¶„ë¦¬

<Callout type="info" title="í•µì‹¬ ìš”ì•½">
  **Container/Presenter íŒ¨í„´**ì€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§(ë°ì´í„° ì²˜ë¦¬, API í˜¸ì¶œ, ìƒíƒœ ê´€ë¦¬)ê³¼ í”„ë ˆì  í…Œì´ì…˜ ë¡œì§(UI ë Œë”ë§, ìŠ¤íƒ€ì¼ë§)ì„ ë¶„ë¦¬í•˜ëŠ” ì•„í‚¤í…ì²˜ íŒ¨í„´ì…ë‹ˆë‹¤.
  ContainerëŠ” "ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€"ë¥¼, PresenterëŠ” "ì–´ë–»ê²Œ ë³´ì´ëŠ”ê°€"ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤.
</Callout>

ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ë‹¤ ë³´ë©´ ì´ëŸ° ê´´ë¬¼ ê°™ì€ ì½”ë“œë¥¼ ë§ˆì£¼í•˜ê²Œ ë©ë‹ˆë‹¤:

```tsx
function UserList() {
  // 1. ìƒíƒœ ê´€ë¦¬
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);
  const [searchTerm, setSearchTerm] = useState('');
  const [sortBy, setSortBy] = useState<'name' | 'email'>('name');
  const [page, setPage] = useState(1);
  
  // 2. API í˜¸ì¶œ
  useEffect(() => {
    async function fetchUsers() {
      try {
        setLoading(true);
        const response = await fetch(`/api/users?page=${page}`);
        const data = await response.json();
        setUsers(data);
      } catch (e) {
        setError(e.message);
      } finally {
        setLoading(false);
      }
    }
    fetchUsers();
  }, [page]);
  
  // 3. ë°ì´í„° ê°€ê³µ
  const filteredUsers = users.filter(user => 
    user.name.toLowerCase().includes(searchTerm.toLowerCase())
  );
  
  const sortedUsers = [...filteredUsers].sort((a, b) => 
    a[sortBy].localeCompare(b[sortBy])
  );
  
  // 4. ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬
  const handleDelete = async (userId: string) => {
    if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
    await fetch(`/api/users/${userId}`, { method: 'DELETE' });
    setUsers(users.filter(u => u.id !== userId));
  };
  
  const handleEdit = (user: User) => {
    // ... í¸ì§‘ ë¡œì§
  };
  
  // 5. ë Œë”ë§ (100ì¤„ì´ ë„˜ëŠ” JSX)
  if (loading) {
    return (
      <div className="flex justify-center items-center h-screen">
        <Spinner size="large" />
        <p className="ml-2 text-gray-600">ë¡œë”© ì¤‘...</p>
      </div>
    );
  }
  
  if (error) {
    return (
      <div className="bg-red-50 border border-red-200 rounded-lg p-4">
        <h3 className="text-red-800 font-bold">ì˜¤ë¥˜ ë°œìƒ</h3>
        <p className="text-red-600">{error}</p>
        <button 
          onClick={() => window.location.reload()}
          className="mt-2 px-4 py-2 bg-red-600 text-white rounded"
        >
          ë‹¤ì‹œ ì‹œë„
        </button>
      </div>
    );
  }
  
  return (
    <div className="container mx-auto px-4 py-8">
      <div className="mb-6 flex gap-4">
        <input
          type="text"
          placeholder="ê²€ìƒ‰..."
          value={searchTerm}
          onChange={(e) => setSearchTerm(e.target.value)}
          className="flex-1 px-4 py-2 border rounded-lg"
        />
        <select 
          value={sortBy} 
          onChange={(e) => setSortBy(e.target.value as 'name' | 'email')}
          className="px-4 py-2 border rounded-lg"
        >
          <option value="name">ì´ë¦„ìˆœ</option>
          <option value="email">ì´ë©”ì¼ìˆœ</option>
        </select>
      </div>
      
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
        {sortedUsers.map(user => (
          <div key={user.id} className="bg-white rounded-lg shadow-md p-6">
            <img 
              src={user.avatar} 
              alt={user.name}
              className="w-16 h-16 rounded-full mx-auto mb-4"
            />
            <h3 className="text-lg font-bold text-center">{user.name}</h3>
            <p className="text-gray-600 text-center">{user.email}</p>
            <div className="mt-4 flex gap-2">
              <button 
                onClick={() => handleEdit(user)}
                className="flex-1 px-3 py-2 bg-blue-500 text-white rounded"
              >
                ìˆ˜ì •
              </button>
              <button 
                onClick={() => handleDelete(user.id)}
                className="flex-1 px-3 py-2 bg-red-500 text-white rounded"
              >
                ì‚­ì œ
              </button>
            </div>
          </div>
        ))}
      </div>
      
      <div className="mt-6 flex justify-center gap-2">
        <button 
          onClick={() => setPage(p => Math.max(1, p - 1))}
          disabled={page === 1}
          className="px-4 py-2 bg-gray-200 rounded disabled:opacity-50"
        >
          ì´ì „
        </button>
        <span className="px-4 py-2">{page}</span>
        <button 
          onClick={() => setPage(p => p + 1)}
          className="px-4 py-2 bg-gray-200 rounded"
        >
          ë‹¤ìŒ
        </button>
      </div>
    </div>
  );
}
```

ì´ ì»´í¬ë„ŒíŠ¸ì˜ ë¬¸ì œì ì€ ë¬´ì—‡ì¼ê¹Œìš”?

- **300ì¤„ì´ ë„˜ëŠ” íŒŒì¼**: ìŠ¤í¬ë¡¤ì´ ëì—†ì´ ë‚´ë ¤ê°‘ë‹ˆë‹¤
- **ì—­í• ì´ ë¶ˆë¶„ëª…**: API í˜¸ì¶œë„ í•˜ê³ , ì •ë ¬ë„ í•˜ê³ , ìŠ¤íƒ€ì¼ë„ ì§€ì •í•˜ê³ ...
- **ì¬ì‚¬ìš© ë¶ˆê°€ëŠ¥**: ê°™ì€ UIë¥¼ ë‹¤ë¥¸ ê³³ì—ì„œ ì“°ë ¤ë©´? ì „ì²´ë¥¼ ë³µì‚¬í•´ì•¼ í•©ë‹ˆë‹¤
- **í…ŒìŠ¤íŠ¸ ì–´ë ¤ì›€**: UI í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ API ëª¨í‚¹ì´ í•„ìš”í•˜ê³ , ë¡œì§ í…ŒìŠ¤íŠ¸í•˜ë ¤ë©´ DOM ë Œë”ë§ì´ í•„ìš”í•©ë‹ˆë‹¤
- **í˜‘ì—… ë¹„íš¨ìœ¨**: ë””ìì´ë„ˆê°€ ìŠ¤íƒ€ì¼ì„ ìˆ˜ì •í•˜ë ¤ë©´ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê¹Œì§€ ì´í•´í•´ì•¼ í•©ë‹ˆë‹¤

Container/Presenter íŒ¨í„´ì€ ì´ ê³ í†µì„ **"ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬"**ë¡œ í•´ê²°í•©ë‹ˆë‹¤.

## 1. ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬: CS ê´€ì ì—ì„œ

Container/Presenter íŒ¨í„´ì€ ì»´í“¨í„° ê³¼í•™ì˜ ê·¼ë³¸ ì›ì¹™ì¸ **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬(Separation of Concerns, SoC)**ë¥¼ êµ¬í˜„í•œ ê²ƒì…ë‹ˆë‹¤.

### ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ë€?

ì‹œìŠ¤í…œì„ ë…ë¦½ì ì¸ ë¶€ë¶„ë“¤ë¡œ ë‚˜ëˆ„ì–´, ê° ë¶€ë¶„ì´ í•˜ë‚˜ì˜ "ê´€ì‹¬ì‚¬"ë§Œ ë‹¤ë£¨ë„ë¡ í•˜ëŠ” ì„¤ê³„ ì›ì¹™ì…ë‹ˆë‹¤.

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <Card title="MVC íŒ¨í„´" icon={<Icon name="Layers" className="text-blue-500" />}>
    - **Model**: ë°ì´í„°ì™€ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§
    - **View**: ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì§€ëŠ” UI
    - **Controller**: ì‚¬ìš©ì ì…ë ¥ ì²˜ë¦¬
    
    ê°ê°ì˜ ì—­í• ì´ ëª…í™•íˆ ë¶„ë¦¬ë˜ì–´ ìˆìŠµë‹ˆë‹¤.
  </Card>
  <Card title="OSI 7ê³„ì¸µ" icon={<Icon name="Network" className="text-green-500" />}>
    ë„¤íŠ¸ì›Œí¬ í†µì‹ ì„ 7ê°œ ê³„ì¸µìœ¼ë¡œ ë¶„ë¦¬:
    - Physical, Data Link, Network, Transport...
    
    ê° ê³„ì¸µì€ ìì‹ ì˜ ì—­í• ë§Œ ìˆ˜í–‰í•˜ê³ , ë‹¤ë¥¸ ê³„ì¸µì˜ ì„¸ë¶€ì‚¬í•­ì€ ëª°ë¼ë„ ë©ë‹ˆë‹¤.
  </Card>
</div>

Container/PresenterëŠ” ì´ ì›ì¹™ì„ React ì»´í¬ë„ŒíŠ¸ì— ì ìš©í•œ ê²ƒì…ë‹ˆë‹¤:

<Tabs defaultValue="container">
  <TabsList>
    <TabsTrigger value="container">Container</TabsTrigger>
    <TabsTrigger value="presenter">Presenter</TabsTrigger>
  </TabsList>
  
  <TabsContent value="container">
    **ê´€ì‹¬ì‚¬: "ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€?"**
    
    - ë°ì´í„° í˜ì¹­ (API í˜¸ì¶œ)
    - ìƒíƒœ ê´€ë¦¬ (useState, useReducer)
    - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (í•„í„°ë§, ì •ë ¬, ê³„ì‚°)
    - ì´ë²¤íŠ¸ ì²˜ë¦¬ (CRUD ì‘ì—…)
    - ì‚¬ì´ë“œ ì´í™íŠ¸ (useEffect)
    
    **ë Œë”ë§ì€ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. Presenterì—ê²Œ ë°ì´í„°ì™€ ì½œë°±ì„ ì „ë‹¬í•˜ê¸°ë§Œ í•©ë‹ˆë‹¤.
  </TabsContent>
  
  <TabsContent value="presenter">
    **ê´€ì‹¬ì‚¬: "ì–´ë–»ê²Œ ë³´ì´ëŠ”ê°€?"**
    
    - UI ë Œë”ë§ (JSX)
    - ìŠ¤íƒ€ì¼ë§ (CSS, Tailwind)
    - ë ˆì´ì•„ì›ƒ êµ¬ì„±
    - ì‚¬ìš©ì ì¸í„°ë™ì…˜ í‘œì‹œ (í˜¸ë²„, í¬ì»¤ìŠ¤)
    
    **ë¡œì§ì€ í¬í•¨í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. propsë¡œ ë°›ì€ ë°ì´í„°ë¥¼ í™”ë©´ì— ê·¸ë¦¬ê¸°ë§Œ í•©ë‹ˆë‹¤.
  </TabsContent>
</Tabs>

### ìˆœìˆ˜ í•¨ìˆ˜ì™€ Presenter

PresenterëŠ” CSì˜ **ìˆœìˆ˜ í•¨ìˆ˜(Pure Function)** ê°œë…ê³¼ ìœ ì‚¬í•©ë‹ˆë‹¤:

```typescript
// ìˆœìˆ˜ í•¨ìˆ˜: ê°™ì€ ì…ë ¥ -> í•­ìƒ ê°™ì€ ì¶œë ¥
function add(a: number, b: number): number {
  return a + b;
}

// Presenter: ê°™ì€ props -> í•­ìƒ ê°™ì€ UI
function UserCardPresenter({ user, onEdit, onDelete }: Props) {
  return (
    <div className="card">
      <h3>{user.name}</h3>
      <button onClick={onEdit}>ìˆ˜ì •</button>
      <button onClick={onDelete}>ì‚­ì œ</button>
    </div>
  );
}
```

<Callout type="success" title="ìˆœìˆ˜ í•¨ìˆ˜ì˜ ì¥ì  = Presenterì˜ ì¥ì ">
  - **ì˜ˆì¸¡ ê°€ëŠ¥ì„±**: ì…ë ¥ì´ ê°™ìœ¼ë©´ ì¶œë ¥ë„ ê°™ìŠµë‹ˆë‹¤
  - **í…ŒìŠ¤íŠ¸ ìš©ì´ì„±**: ë³µì¡í•œ setup ì—†ì´ propsë§Œ ë„£ì–´ì„œ í…ŒìŠ¤íŠ¸
  - **ë””ë²„ê¹… í¸ì˜ì„±**: ë²„ê·¸ê°€ ìˆë‹¤ë©´ propsë¥¼ í™•ì¸í•˜ë©´ ë©ë‹ˆë‹¤
  - **ìºì‹± ê°€ëŠ¥**: React.memoë¡œ ìµœì í™”í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤
</Callout>

## 2. íŒ¨í„´ì˜ ê¸°ë³¸ êµ¬ì¡°

Container/Presenter íŒ¨í„´ì„ ì ìš©í•˜ë©´ í•˜ë‚˜ì˜ ê±°ëŒ€í•œ ì»´í¬ë„ŒíŠ¸ê°€ ë‘ ê°œì˜ ì‘ì€ ì»´í¬ë„ŒíŠ¸ë¡œ ë¶„ë¦¬ë©ë‹ˆë‹¤.

### Before: ëª¨ë†€ë¦¬ì‹ ì»´í¬ë„ŒíŠ¸

```tsx
// âŒ ëª¨ë“  ê²ƒì´ í•œ ê³³ì—
function UserList() {
  // ë¡œì§ (50ì¤„)
  // ...
  
  // ë Œë”ë§ (100ì¤„)
  return <div>...</div>;
}
```

### After: Container + Presenter

```tsx
// âœ… Container: ë¡œì§ ë‹´ë‹¹
function UserListContainer() {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  
  useEffect(() => {
    fetchUsers().then(setUsers).finally(() => setLoading(false));
  }, []);
  
  const handleDelete = async (id: string) => {
    await deleteUser(id);
    setUsers(users.filter(u => u.id !== id));
  };
  
  // Presenterì—ê²Œ ë°ì´í„°ì™€ í•¸ë“¤ëŸ¬ ì „ë‹¬
  return (
    <UserListPresenter 
      users={users}
      loading={loading}
      onDelete={handleDelete}
    />
  );
}

// âœ… Presenter: UI ë‹´ë‹¹
interface UserListPresenterProps {
  users: User[];
  loading: boolean;
  onDelete: (id: string) => void;
}

function UserListPresenter({ users, loading, onDelete }: UserListPresenterProps) {
  if (loading) {
    return <LoadingSpinner />;
  }
  
  return (
    <div className="grid grid-cols-3 gap-4">
      {users.map(user => (
        <UserCard 
          key={user.id}
          user={user}
          onDelete={() => onDelete(user.id)}
        />
      ))}
    </div>
  );
}
```

<div className="my-6">
```mermaid
graph TD
    A[Container] -->|ë°ì´í„° + í•¸ë“¤ëŸ¬| B[Presenter]
    A -->|API í˜¸ì¶œ| C[Backend]
    A -->|ìƒíƒœ ê´€ë¦¬| D[State]
    B -->|UI ë Œë”ë§| E[DOM]
    
    style A fill:#3b82f6
    style B fill:#10b981
```
</div>

## 3. í˜„ì‹¤ ì‹œë‚˜ë¦¬ì˜¤: ì‹¤ì „ ì˜ˆì œ

Container/Presenter íŒ¨í„´ì´ ë¹›ì„ ë°œí•˜ëŠ” ì‹¤ì œ ìƒí™©ë“¤ì„ ì‚´í´ë´…ì‹œë‹¤.

### ğŸ›’ ì‹œë‚˜ë¦¬ì˜¤ 1: ì œí’ˆ ì¹´ë“œ

ì „ììƒê±°ë˜ ì‚¬ì´íŠ¸ì—ì„œ ì œí’ˆ ì¹´ë“œë¥¼ ë§Œë“ ë‹¤ê³  ê°€ì •í•´ë´…ì‹œë‹¤.

**ìš”êµ¬ì‚¬í•­:**
- ì°œí•˜ê¸° ë²„íŠ¼ (ë¡œê·¸ì¸ í•„ìš”)
- ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°
- ì¬ê³  í™•ì¸ í›„ í’ˆì ˆ í‘œì‹œ
- í• ì¸ìœ¨ ê³„ì‚°
- ë¡œê·¸ ì „ì†¡ (í´ë¦­ ì¶”ì )

#### Container: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§

```tsx
// ProductCardContainer.tsx
import { useState } from 'react';
import { useAuth } from '@/hooks/useAuth';
import { useCart } from '@/hooks/useCart';
import { useWishlist } from '@/hooks/useWishlist';
import { trackEvent } from '@/lib/analytics';
import { ProductCardPresenter } from './ProductCardPresenter';

interface ProductCardContainerProps {
  product: Product;
}

export function ProductCardContainer({ product }: ProductCardContainerProps) {
  const { user } = useAuth();
  const { addToCart, isInCart } = useCart();
  const { addToWishlist, removeFromWishlist, isInWishlist } = useWishlist();
  const [isAdding, setIsAdding] = useState(false);
  
  // í• ì¸ìœ¨ ê³„ì‚°
  const discount = product.originalPrice 
    ? Math.round((1 - product.price / product.originalPrice) * 100)
    : 0;
  
  // ì¬ê³  í™•ì¸
  const isOutOfStock = product.stock === 0;
  const isLowStock = product.stock > 0 && product.stock <= 5;
  
  // ì°œí•˜ê¸° í•¸ë“¤ëŸ¬
  const handleWishlistToggle = async () => {
    if (!user) {
      alert('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
      return;
    }
    
    if (isInWishlist(product.id)) {
      await removeFromWishlist(product.id);
      trackEvent('wishlist_remove', { productId: product.id });
    } else {
      await addToWishlist(product.id);
      trackEvent('wishlist_add', { productId: product.id });
    }
  };
  
  // ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° í•¸ë“¤ëŸ¬
  const handleAddToCart = async () => {
    if (isOutOfStock) return;
    
    setIsAdding(true);
    try {
      await addToCart(product.id);
      trackEvent('add_to_cart', { 
        productId: product.id, 
        price: product.price 
      });
    } catch (error) {
      alert('ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    } finally {
      setIsAdding(false);
    }
  };
  
  // í´ë¦­ ì¶”ì 
  const handleProductClick = () => {
    trackEvent('product_click', { 
      productId: product.id,
      position: 'card'
    });
  };
  
  // Presenterì— ì „ë‹¬
  return (
    <ProductCardPresenter
      product={product}
      discount={discount}
      isOutOfStock={isOutOfStock}
      isLowStock={isLowStock}
      isInWishlist={isInWishlist(product.id)}
      isInCart={isInCart(product.id)}
      isAdding={isAdding}
      onWishlistToggle={handleWishlistToggle}
      onAddToCart={handleAddToCart}
      onClick={handleProductClick}
    />
  );
}
```

#### Presenter: UI ë Œë”ë§

```tsx
// ProductCardPresenter.tsx
import { Heart, ShoppingCart, AlertCircle } from 'lucide-react';

interface ProductCardPresenterProps {
  product: Product;
  discount: number;
  isOutOfStock: boolean;
  isLowStock: boolean;
  isInWishlist: boolean;
  isInCart: boolean;
  isAdding: boolean;
  onWishlistToggle: () => void;
  onAddToCart: () => void;
  onClick: () => void;
}

export function ProductCardPresenter({
  product,
  discount,
  isOutOfStock,
  isLowStock,
  isInWishlist,
  isInCart,
  isAdding,
  onWishlistToggle,
  onAddToCart,
  onClick,
}: ProductCardPresenterProps) {
  return (
    <div 
      className="group relative bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow"
      onClick={onClick}
    >
      {/* í• ì¸ ë±ƒì§€ */}
      {discount > 0 && (
        <div className="absolute top-2 left-2 z-10 bg-red-500 text-white px-2 py-1 rounded-md font-bold text-sm">
          {discount}% OFF
        </div>
      )}
      
      {/* ì°œí•˜ê¸° ë²„íŠ¼ */}
      <button
        onClick={(e) => {
          e.stopPropagation();
          onWishlistToggle();
        }}
        className="absolute top-2 right-2 z-10 p-2 rounded-full bg-white/80 hover:bg-white transition-colors"
      >
        <Heart 
          className={`w-5 h-5 ${isInWishlist ? 'fill-red-500 text-red-500' : 'text-gray-600'}`}
        />
      </button>
      
      {/* ìƒí’ˆ ì´ë¯¸ì§€ */}
      <div className="relative aspect-square overflow-hidden">
        <img
          src={product.image}
          alt={product.name}
          className="w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"
        />
        
        {/* í’ˆì ˆ ì˜¤ë²„ë ˆì´ */}
        {isOutOfStock && (
          <div className="absolute inset-0 bg-black/60 flex items-center justify-center">
            <span className="text-white font-bold text-xl">SOLD OUT</span>
          </div>
        )}
      </div>
      
      {/* ìƒí’ˆ ì •ë³´ */}
      <div className="p-4">
        <h3 className="font-semibold text-lg mb-2 line-clamp-2">
          {product.name}
        </h3>
        
        {/* ê°€ê²© */}
        <div className="flex items-center gap-2 mb-3">
          {product.originalPrice && (
            <span className="text-gray-400 line-through text-sm">
              {product.originalPrice.toLocaleString()}ì›
            </span>
          )}
          <span className="text-xl font-bold">
            {product.price.toLocaleString()}ì›
          </span>
        </div>
        
        {/* ì¬ê³  ê²½ê³  */}
        {isLowStock && (
          <div className="flex items-center gap-1 text-orange-600 text-sm mb-3">
            <AlertCircle className="w-4 h-4" />
            <span>ì¬ê³  {product.stock}ê°œ ë‚¨ìŒ</span>
          </div>
        )}
        
        {/* ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ */}
        <button
          onClick={(e) => {
            e.stopPropagation();
            onAddToCart();
          }}
          disabled={isOutOfStock || isAdding}
          className={`
            w-full py-2 rounded-lg font-semibold transition-colors
            flex items-center justify-center gap-2
            ${isInCart 
              ? 'bg-green-500 text-white' 
              : 'bg-blue-500 text-white hover:bg-blue-600'
            }
            disabled:bg-gray-300 disabled:cursor-not-allowed
          `}
        >
          <ShoppingCart className="w-4 h-4" />
          {isAdding ? 'ë‹´ëŠ” ì¤‘...' : isInCart ? 'ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¹€' : 'ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°'}
        </button>
      </div>
    </div>
  );
}
```

<Callout type="success" title="ë¶„ë¦¬ì˜ ì´ì ">
  - **Container**: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ ë³´ë©´ ë©ë‹ˆë‹¤. ë¡œê·¸ì¸ ì²´í¬, ì¬ê³  í™•ì¸, ë¶„ì„ ì¶”ì  ë“±
  - **Presenter**: ìˆœìˆ˜í•œ UI. Storybookì—ì„œ ëª¨ë“  ì¼€ì´ìŠ¤(í’ˆì ˆ, í• ì¸, ì°œ, ì¬ê³  ë¶€ì¡±)ë¥¼ ë¯¸ë¦¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤
  - **ì¬ì‚¬ìš©**: `ProductCardPresenter`ë¥¼ ê²€ìƒ‰ ê²°ê³¼, ì¶”ì²œ ìƒí’ˆ, ê´€ë ¨ ìƒí’ˆ ë“± ì–´ë””ì„œë“  ì‚¬ìš© ê°€ëŠ¥
  - **í…ŒìŠ¤íŠ¸**: PresenterëŠ” propsë§Œ ë„£ì–´ì„œ ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸, ContainerëŠ” API ëª¨í‚¹ìœ¼ë¡œ ë¡œì§ í…ŒìŠ¤íŠ¸
</Callout>

### ğŸ“Š ì‹œë‚˜ë¦¬ì˜¤ 2: ëŒ€ì‹œë³´ë“œ ì°¨íŠ¸

ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œì—ì„œ ë§¤ì¶œ ì°¨íŠ¸ë¥¼ í‘œì‹œí•˜ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤.

#### Container: ë°ì´í„° ê°€ê³µ ë° ì˜µì…˜ ê³„ì‚°

```tsx
// SalesChartContainer.tsx
import { useEffect, useState } from 'react';
import { useQuery } from '@tanstack/react-query';
import { SalesChartPresenter } from './SalesChartPresenter';
import type { ChartData, ChartOptions } from 'chart.js';

interface SalesChartContainerProps {
  startDate: Date;
  endDate: Date;
  granularity: 'daily' | 'weekly' | 'monthly';
}

export function SalesChartContainer({ 
  startDate, 
  endDate, 
  granularity 
}: SalesChartContainerProps) {
  // API í˜¸ì¶œ
  const { data: rawData, isLoading, error } = useQuery({
    queryKey: ['sales', startDate, endDate, granularity],
    queryFn: () => fetchSalesData(startDate, endDate, granularity),
  });
  
  // ì°¨íŠ¸ ë°ì´í„° ê°€ê³µ
  const chartData: ChartData<'line'> | null = rawData ? {
    labels: rawData.map(d => formatDate(d.date, granularity)),
    datasets: [
      {
        label: 'ë§¤ì¶œì•¡',
        data: rawData.map(d => d.revenue),
        borderColor: 'rgb(59, 130, 246)',
        backgroundColor: 'rgba(59, 130, 246, 0.1)',
        fill: true,
      },
      {
        label: 'ì£¼ë¬¸ ìˆ˜',
        data: rawData.map(d => d.orderCount),
        borderColor: 'rgb(16, 185, 129)',
        backgroundColor: 'rgba(16, 185, 129, 0.1)',
        fill: true,
        yAxisID: 'y1',
      },
    ],
  } : null;
  
  // ì°¨íŠ¸ ì˜µì…˜ ê³„ì‚°
  const chartOptions: ChartOptions<'line'> = {
    responsive: true,
    interaction: {
      mode: 'index',
      intersect: false,
    },
    plugins: {
      title: {
        display: true,
        text: `ë§¤ì¶œ ë¶„ì„ (${formatDateRange(startDate, endDate)})`,
      },
      tooltip: {
        callbacks: {
          label: (context) => {
            const label = context.dataset.label || '';
            const value = context.parsed.y;
            return context.datasetIndex === 0 
              ? `${label}: ${value.toLocaleString()}ì›`
              : `${label}: ${value}ê±´`;
          },
        },
      },
    },
    scales: {
      y: {
        type: 'linear',
        display: true,
        position: 'left',
        title: {
          display: true,
          text: 'ë§¤ì¶œì•¡ (ì›)',
        },
      },
      y1: {
        type: 'linear',
        display: true,
        position: 'right',
        title: {
          display: true,
          text: 'ì£¼ë¬¸ ìˆ˜ (ê±´)',
        },
        grid: {
          drawOnChartArea: false,
        },
      },
    },
  };
  
  // í†µê³„ ê³„ì‚°
  const stats = rawData ? {
    totalRevenue: rawData.reduce((sum, d) => sum + d.revenue, 0),
    totalOrders: rawData.reduce((sum, d) => sum + d.orderCount, 0),
    avgOrderValue: rawData.reduce((sum, d) => sum + d.revenue, 0) / 
                   rawData.reduce((sum, d) => sum + d.orderCount, 0),
    peakDay: rawData.reduce((max, d) => d.revenue > max.revenue ? d : max),
  } : null;
  
  return (
    <SalesChartPresenter
      chartData={chartData}
      chartOptions={chartOptions}
      stats={stats}
      loading={isLoading}
      error={error?.message}
    />
  );
}
```

#### Presenter: ì°¨íŠ¸ ë Œë”ë§

```tsx
// SalesChartPresenter.tsx
import { Line } from 'react-chartjs-2';
import { TrendingUp, ShoppingBag, DollarSign, Calendar } from 'lucide-react';
import type { ChartData, ChartOptions } from 'chart.js';

interface SalesChartPresenterProps {
  chartData: ChartData<'line'> | null;
  chartOptions: ChartOptions<'line'>;
  stats: {
    totalRevenue: number;
    totalOrders: number;
    avgOrderValue: number;
    peakDay: { date: string; revenue: number };
  } | null;
  loading: boolean;
  error?: string;
}

export function SalesChartPresenter({
  chartData,
  chartOptions,
  stats,
  loading,
  error,
}: SalesChartPresenterProps) {
  if (loading) {
    return (
      <div className="bg-white rounded-lg shadow-md p-6">
        <div className="animate-pulse">
          <div className="h-8 bg-gray-200 rounded w-1/3 mb-4"></div>
          <div className="h-64 bg-gray-200 rounded mb-4"></div>
          <div className="grid grid-cols-4 gap-4">
            {[...Array(4)].map((_, i) => (
              <div key={i} className="h-24 bg-gray-200 rounded"></div>
            ))}
          </div>
        </div>
      </div>
    );
  }
  
  if (error) {
    return (
      <div className="bg-red-50 border border-red-200 rounded-lg p-6">
        <h3 className="text-red-800 font-bold mb-2">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤</h3>
        <p className="text-red-600">{error}</p>
      </div>
    );
  }
  
  if (!chartData || !stats) {
    return (
      <div className="bg-gray-50 rounded-lg p-6 text-center text-gray-600">
        ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤
      </div>
    );
  }
  
  return (
    <div className="bg-white rounded-lg shadow-md p-6">
      {/* ì°¨íŠ¸ */}
      <div className="mb-6">
        <Line data={chartData} options={chartOptions} />
      </div>
      
      {/* í†µê³„ ì¹´ë“œ */}
      <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
        <StatCard
          icon={<DollarSign className="w-6 h-6 text-blue-500" />}
          label="ì´ ë§¤ì¶œ"
          value={`${stats.totalRevenue.toLocaleString()}ì›`}
        />
        <StatCard
          icon={<ShoppingBag className="w-6 h-6 text-green-500" />}
          label="ì´ ì£¼ë¬¸"
          value={`${stats.totalOrders.toLocaleString()}ê±´`}
        />
        <StatCard
          icon={<TrendingUp className="w-6 h-6 text-purple-500" />}
          label="í‰ê·  ì£¼ë¬¸ì•¡"
          value={`${Math.round(stats.avgOrderValue).toLocaleString()}ì›`}
        />
        <StatCard
          icon={<Calendar className="w-6 h-6 text-orange-500" />}
          label="ìµœê³  ë§¤ì¶œì¼"
          value={stats.peakDay.date}
          subValue={`${stats.peakDay.revenue.toLocaleString()}ì›`}
        />
      </div>
    </div>
  );
}

// í†µê³„ ì¹´ë“œ ì„œë¸Œ ì»´í¬ë„ŒíŠ¸
function StatCard({ 
  icon, 
  label, 
  value, 
  subValue 
}: { 
  icon: React.ReactNode;
  label: string;
  value: string;
  subValue?: string;
}) {
  return (
    <div className="bg-gray-50 rounded-lg p-4">
      <div className="flex items-center gap-3 mb-2">
        {icon}
        <span className="text-sm text-gray-600">{label}</span>
      </div>
      <div className="text-2xl font-bold">{value}</div>
      {subValue && <div className="text-sm text-gray-500 mt-1">{subValue}</div>}
    </div>
  );
}
```

<Callout type="info" title="Storybookì—ì„œ ëª¨ë“  ì¼€ì´ìŠ¤ í™•ì¸">
  Presenterë¥¼ ë¶„ë¦¬í–ˆìœ¼ë¯€ë¡œ, Storybookì—ì„œ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ë¥¼ ë¯¸ë¦¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤:
  - ë¡œë”© ìƒíƒœ
  - ì—ëŸ¬ ìƒíƒœ
  - ë°ì´í„° ì—†ìŒ
  - ì •ìƒ ë°ì´í„° (ì¼ê°„/ì£¼ê°„/ì›”ê°„)
  - ê·¹ë‹¨ì ì¸ ê°’ (ë§¤ì¶œ ê¸‰ì¦, ì£¼ë¬¸ ì—†ëŠ” ë‚ )
  
  API ì—†ì´ë„ ëª¨ë“  UI ìƒíƒœë¥¼ í™•ì¸í•˜ê³  ë””ìì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤!
</Callout>

### ğŸ‘¥ ì‹œë‚˜ë¦¬ì˜¤ 3: ì‚¬ìš©ì ëª©ë¡ (í˜ì´ì§€ë„¤ì´ì…˜ + í•„í„°ë§)

ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•œ ì‚¬ìš©ì ëª©ë¡ í˜ì´ì§€ì…ë‹ˆë‹¤.

#### Container: ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬

```tsx
// UserListContainer.tsx
import { useState, useEffect, useCallback } from 'react';
import { useSearchParams } from 'next/navigation';
import { UserListPresenter } from './UserListPresenter';

export function UserListContainer() {
  const searchParams = useSearchParams();
  
  // URLì—ì„œ ì´ˆê¸° ìƒíƒœ ë³µì›
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  const [page, setPage] = useState(Number(searchParams.get('page')) || 1);
  const [search, setSearch] = useState(searchParams.get('search') || '');
  const [role, setRole] = useState<Role | 'all'>(
    (searchParams.get('role') as Role) || 'all'
  );
  const [sort, setSort] = useState<SortOption>(
    (searchParams.get('sort') as SortOption) || 'name'
  );
  const [totalPages, setTotalPages] = useState(1);
  
  // ë°ì´í„° í˜ì¹­ (ì˜ì¡´ì„± ë°°ì—´ì˜ ê°’ì´ ë°”ë€” ë•Œë§ˆë‹¤ ì‹¤í–‰)
  useEffect(() => {
    const fetchData = async () => {
      setLoading(true);
      try {
        const response = await fetch(
          `/api/users?page=${page}&search=${search}&role=${role}&sort=${sort}`
        );
        const data = await response.json();
        setUsers(data.users);
        setTotalPages(data.totalPages);
      } catch (error) {
        console.error('Failed to fetch users:', error);
      } finally {
        setLoading(false);
      }
    };
    
    fetchData();
  }, [page, search, role, sort]);
  
  // URL ë™ê¸°í™”
  useEffect(() => {
    const params = new URLSearchParams();
    if (page > 1) params.set('page', String(page));
    if (search) params.set('search', search);
    if (role !== 'all') params.set('role', role);
    if (sort !== 'name') params.set('sort', sort);
    
    const newUrl = params.toString() 
      ? `${window.location.pathname}?${params}`
      : window.location.pathname;
    
    window.history.replaceState({}, '', newUrl);
  }, [page, search, role, sort]);
  
  // ê²€ìƒ‰ì–´ ë³€ê²½ (ë””ë°”ìš´ìŠ¤ ì²˜ë¦¬ëŠ” ë³„ë„ hookìœ¼ë¡œ)
  const handleSearchChange = useCallback((newSearch: string) => {
    setSearch(newSearch);
    setPage(1); // ê²€ìƒ‰ ì‹œ ì²« í˜ì´ì§€ë¡œ
  }, []);
  
  // í•„í„° ë³€ê²½
  const handleRoleChange = useCallback((newRole: Role | 'all') => {
    setRole(newRole);
    setPage(1);
  }, []);
  
  // ì •ë ¬ ë³€ê²½
  const handleSortChange = useCallback((newSort: SortOption) => {
    setSort(newSort);
  }, []);
  
  // í˜ì´ì§€ ë³€ê²½
  const handlePageChange = useCallback((newPage: number) => {
    setPage(newPage);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  }, []);
  
  // ì‚¬ìš©ì ì‚­ì œ
  const handleDelete = useCallback(async (userId: string) => {
    if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
    
    try {
      await fetch(`/api/users/${userId}`, { method: 'DELETE' });
      setUsers(users.filter(u => u.id !== userId));
    } catch (error) {
      alert('ì‚­ì œì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    }
  }, [users]);
  
  // ì‚¬ìš©ì ì—­í•  ë³€ê²½
  const handleRoleUpdate = useCallback(async (userId: string, newRole: Role) => {
    try {
      await fetch(`/api/users/${userId}`, {
        method: 'PATCH',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ role: newRole }),
      });
      
      setUsers(users.map(u => 
        u.id === userId ? { ...u, role: newRole } : u
      ));
    } catch (error) {
      alert('ì—­í•  ë³€ê²½ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤');
    }
  }, [users]);
  
  return (
    <UserListPresenter
      users={users}
      loading={loading}
      page={page}
      totalPages={totalPages}
      search={search}
      role={role}
      sort={sort}
      onSearchChange={handleSearchChange}
      onRoleChange={handleRoleChange}
      onSortChange={handleSortChange}
      onPageChange={handlePageChange}
      onDelete={handleDelete}
      onRoleUpdate={handleRoleUpdate}
    />
  );
}
```

#### Presenter: UI ë Œë”ë§

```tsx
// UserListPresenter.tsx
import { Search, Filter, ArrowUpDown, Trash2, Edit } from 'lucide-react';

interface UserListPresenterProps {
  users: User[];
  loading: boolean;
  page: number;
  totalPages: number;
  search: string;
  role: Role | 'all';
  sort: SortOption;
  onSearchChange: (search: string) => void;
  onRoleChange: (role: Role | 'all') => void;
  onSortChange: (sort: SortOption) => void;
  onPageChange: (page: number) => void;
  onDelete: (userId: string) => void;
  onRoleUpdate: (userId: string, role: Role) => void;
}

export function UserListPresenter({
  users,
  loading,
  page,
  totalPages,
  search,
  role,
  sort,
  onSearchChange,
  onRoleChange,
  onSortChange,
  onPageChange,
  onDelete,
  onRoleUpdate,
}: UserListPresenterProps) {
  return (
    <div className="container mx-auto px-4 py-8">
      <h1 className="text-3xl font-bold mb-6">ì‚¬ìš©ì ê´€ë¦¬</h1>
      
      {/* í•„í„° ë°” */}
      <div className="bg-white rounded-lg shadow-md p-4 mb-6">
        <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
          {/* ê²€ìƒ‰ */}
          <div className="relative">
            <Search className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
            <input
              type="text"
              placeholder="ì´ë¦„, ì´ë©”ì¼ ê²€ìƒ‰..."
              value={search}
              onChange={(e) => onSearchChange(e.target.value)}
              className="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            />
          </div>
          
          {/* ì—­í•  í•„í„° */}
          <div className="relative">
            <Filter className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
            <select
              value={role}
              onChange={(e) => onRoleChange(e.target.value as Role | 'all')}
              className="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="all">ëª¨ë“  ì—­í• </option>
              <option value="admin">ê´€ë¦¬ì</option>
              <option value="user">ì‚¬ìš©ì</option>
              <option value="guest">ê²ŒìŠ¤íŠ¸</option>
            </select>
          </div>
          
          {/* ì •ë ¬ */}
          <div className="relative">
            <ArrowUpDown className="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5" />
            <select
              value={sort}
              onChange={(e) => onSortChange(e.target.value as SortOption)}
              className="w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"
            >
              <option value="name">ì´ë¦„ìˆœ</option>
              <option value="email">ì´ë©”ì¼ìˆœ</option>
              <option value="createdAt">ê°€ì…ì¼ìˆœ</option>
            </select>
          </div>
        </div>
      </div>
      
      {/* ì‚¬ìš©ì ëª©ë¡ */}
      {loading ? (
        <LoadingSkeleton />
      ) : users.length === 0 ? (
        <EmptyState search={search} />
      ) : (
        <>
          <div className="bg-white rounded-lg shadow-md overflow-hidden mb-6">
            <table className="w-full">
              <thead className="bg-gray-50">
                <tr>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    ì‚¬ìš©ì
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    ì—­í• 
                  </th>
                  <th className="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
                    ê°€ì…ì¼
                  </th>
                  <th className="px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider">
                    ì‘ì—…
                  </th>
                </tr>
              </thead>
              <tbody className="divide-y divide-gray-200">
                {users.map((user) => (
                  <tr key={user.id} className="hover:bg-gray-50">
                    <td className="px-6 py-4 whitespace-nowrap">
                      <div className="flex items-center">
                        <img
                          src={user.avatar}
                          alt={user.name}
                          className="w-10 h-10 rounded-full"
                        />
                        <div className="ml-4">
                          <div className="text-sm font-medium text-gray-900">
                            {user.name}
                          </div>
                          <div className="text-sm text-gray-500">
                            {user.email}
                          </div>
                        </div>
                      </div>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap">
                      <select
                        value={user.role}
                        onChange={(e) => onRoleUpdate(user.id, e.target.value as Role)}
                        className="text-sm border rounded px-2 py-1"
                      >
                        <option value="admin">ê´€ë¦¬ì</option>
                        <option value="user">ì‚¬ìš©ì</option>
                        <option value="guest">ê²ŒìŠ¤íŠ¸</option>
                      </select>
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                      {new Date(user.createdAt).toLocaleDateString()}
                    </td>
                    <td className="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
                      <button
                        onClick={() => onDelete(user.id)}
                        className="text-red-600 hover:text-red-900 ml-4"
                      >
                        <Trash2 className="w-4 h-4" />
                      </button>
                    </td>
                  </tr>
                ))}
              </tbody>
            </table>
          </div>
          
          {/* í˜ì´ì§€ë„¤ì´ì…˜ */}
          <Pagination
            currentPage={page}
            totalPages={totalPages}
            onPageChange={onPageChange}
          />
        </>
      )}
    </div>
  );
}

// ë¡œë”© ìŠ¤ì¼ˆë ˆí†¤
function LoadingSkeleton() {
  return (
    <div className="bg-white rounded-lg shadow-md p-6 animate-pulse">
      {[...Array(5)].map((_, i) => (
        <div key={i} className="flex items-center gap-4 mb-4">
          <div className="w-10 h-10 bg-gray-200 rounded-full"></div>
          <div className="flex-1">
            <div className="h-4 bg-gray-200 rounded w-1/4 mb-2"></div>
            <div className="h-3 bg-gray-200 rounded w-1/3"></div>
          </div>
        </div>
      ))}
    </div>
  );
}

// ë¹ˆ ìƒíƒœ
function EmptyState({ search }: { search: string }) {
  return (
    <div className="bg-white rounded-lg shadow-md p-12 text-center">
      <div className="text-6xl mb-4">ğŸ”</div>
      <h3 className="text-xl font-semibold mb-2">
        {search ? 'ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤' : 'ì‚¬ìš©ìê°€ ì—†ìŠµë‹ˆë‹¤'}
      </h3>
      <p className="text-gray-600">
        {search ? `"${search}"ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤` : 'ì²« ì‚¬ìš©ìë¥¼ ì´ˆëŒ€í•´ë³´ì„¸ìš”'}
      </p>
    </div>
  );
}

// í˜ì´ì§€ë„¤ì´ì…˜
function Pagination({ 
  currentPage, 
  totalPages, 
  onPageChange 
}: { 
  currentPage: number;
  totalPages: number;
  onPageChange: (page: number) => void;
}) {
  const pages = Array.from({ length: totalPages }, (_, i) => i + 1);
  
  // 5ê°œì”©ë§Œ í‘œì‹œ
  const visiblePages = pages.filter(p => 
    p === 1 || 
    p === totalPages || 
    Math.abs(p - currentPage) <= 2
  );
  
  return (
    <div className="flex justify-center items-center gap-2">
      <button
        onClick={() => onPageChange(currentPage - 1)}
        disabled={currentPage === 1}
        className="px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"
      >
        ì´ì „
      </button>
      
      {visiblePages.map((p, i) => {
        const prevPage = visiblePages[i - 1];
        const showEllipsis = prevPage && p - prevPage > 1;
        
        return (
          <React.Fragment key={p}>
            {showEllipsis && <span className="px-2">...</span>}
            <button
              onClick={() => onPageChange(p)}
              className={`
                px-4 py-2 border rounded-lg
                ${p === currentPage 
                  ? 'bg-blue-500 text-white border-blue-500' 
                  : 'hover:bg-gray-50'
                }
              `}
            >
              {p}
            </button>
          </React.Fragment>
        );
      })}
      
      <button
        onClick={() => onPageChange(currentPage + 1)}
        disabled={currentPage === totalPages}
        className="px-4 py-2 border rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50"
      >
        ë‹¤ìŒ
      </button>
    </div>
  );
}
```

## 4. ì¥ì : ì™œ ì´ íŒ¨í„´ì„ ì¨ì•¼ í• ê¹Œ?

<div className="grid grid-cols-1 md:grid-cols-2 gap-4 my-6">
  <Card title="ì¬ì‚¬ìš©ì„± (Reusability)" icon={<Icon name="Repeat" className="text-blue-500" />}>
    PresenterëŠ” ìˆœìˆ˜í•˜ê²Œ propsë§Œ ë°›ì•„ì„œ ë Œë”ë§í•˜ë¯€ë¡œ, **ë‹¤ë¥¸ í˜ì´ì§€ë‚˜ ë‹¤ë¥¸ ë°ì´í„° ì†ŒìŠ¤**ì™€ í•¨ê»˜ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
    
    ì˜ˆ: `ProductCardPresenter`ë¥¼ ê²€ìƒ‰ ê²°ê³¼, ì¶”ì²œ ìƒí’ˆ, ê´€ë ¨ ìƒí’ˆì—ì„œ ëª¨ë‘ ì‚¬ìš©
  </Card>
  
  <Card title="í…ŒìŠ¤íŠ¸ ìš©ì´ì„± (Testability)" icon={<Icon name="CheckCircle" className="text-green-500" />}>
    PresenterëŠ” propsë§Œ ë„£ìœ¼ë©´ ë˜ë¯€ë¡œ **ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ê°€ ì‰½ìŠµë‹ˆë‹¤**. ContainerëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ë§Œ í…ŒìŠ¤íŠ¸í•˜ë©´ ë©ë‹ˆë‹¤.
    
    ì˜ˆ: PresenterëŠ” ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸, ContainerëŠ” ë¡œì§ í…ŒìŠ¤íŠ¸
  </Card>
  
  <Card title="Storybook í™œìš© (Design System)" icon={<Icon name="BookOpen" className="text-purple-500" />}>
    PresenterëŠ” API ì—†ì´ë„ **ëª¨ë“  UI ìƒíƒœë¥¼ Storybookì—ì„œ ë¯¸ë¦¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤**.
    
    ì˜ˆ: ë¡œë”©, ì—ëŸ¬, ë¹ˆ ìƒíƒœ, ì •ìƒ ìƒíƒœ ëª¨ë‘ í™•ì¸ ê°€ëŠ¥
  </Card>
  
  <Card title="í˜‘ì—… íš¨ìœ¨ì„± (Collaboration)" icon={<Icon name="Users" className="text-orange-500" />}>
    ë””ìì´ë„ˆëŠ” Presenterì˜ ìŠ¤íƒ€ì¼ë§Œ, ê°œë°œìëŠ” Containerì˜ ë¡œì§ë§Œ ìˆ˜ì •í•˜ì—¬ **ì—­í•  ë¶„ë‹´**ì´ ëª…í™•í•´ì§‘ë‹ˆë‹¤.
    
    ì˜ˆ: ë””ìì´ë„ˆê°€ Tailwind í´ë˜ìŠ¤ë§Œ ìˆ˜ì •, ê°œë°œìëŠ” API ë¡œì§ë§Œ ìˆ˜ì •
  </Card>
</div>

### í…ŒìŠ¤íŠ¸ ì˜ˆì œ

#### Presenter í…ŒìŠ¤íŠ¸: ê°„ë‹¨í•œ ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸

```tsx
// ProductCardPresenter.test.tsx
import { render } from '@testing-library/react';
import { ProductCardPresenter } from './ProductCardPresenter';

describe('ProductCardPresenter', () => {
  const mockProduct = {
    id: '1',
    name: 'Test Product',
    price: 10000,
    originalPrice: 15000,
    image: '/test.jpg',
    stock: 10,
  };
  
  it('ì •ìƒ ìƒíƒœë¥¼ ë Œë”ë§í•œë‹¤', () => {
    const { container } = render(
      <ProductCardPresenter
        product={mockProduct}
        discount={33}
        isOutOfStock={false}
        isLowStock={false}
        isInWishlist={false}
        isInCart={false}
        isAdding={false}
        onWishlistToggle={() => {}}
        onAddToCart={() => {}}
        onClick={() => {}}
      />
    );
    
    expect(container).toMatchSnapshot();
  });
  
  it('í’ˆì ˆ ìƒíƒœë¥¼ ë Œë”ë§í•œë‹¤', () => {
    const { getByText } = render(
      <ProductCardPresenter
        {...mockProps}
        isOutOfStock={true}
      />
    );
    
    expect(getByText('SOLD OUT')).toBeInTheDocument();
  });
  
  it('í• ì¸ ë±ƒì§€ë¥¼ í‘œì‹œí•œë‹¤', () => {
    const { getByText } = render(
      <ProductCardPresenter
        {...mockProps}
        discount={33}
      />
    );
    
    expect(getByText('33% OFF')).toBeInTheDocument();
  });
});
```

#### Container í…ŒìŠ¤íŠ¸: ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í…ŒìŠ¤íŠ¸

```tsx
// ProductCardContainer.test.tsx
import { render, fireEvent, waitFor } from '@testing-library/react';
import { ProductCardContainer } from './ProductCardContainer';
import * as analytics from '@/lib/analytics';

jest.mock('@/lib/analytics');
jest.mock('@/hooks/useAuth', () => ({
  useAuth: () => ({ user: { id: '1', name: 'Test User' } }),
}));

describe('ProductCardContainer', () => {
  it('ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸° ì‹œ ë¶„ì„ ì´ë²¤íŠ¸ë¥¼ ì „ì†¡í•œë‹¤', async () => {
    const { getByText } = render(
      <ProductCardContainer product={mockProduct} />
    );
    
    const addButton = getByText('ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°');
    fireEvent.click(addButton);
    
    await waitFor(() => {
      expect(analytics.trackEvent).toHaveBeenCalledWith('add_to_cart', {
        productId: mockProduct.id,
        price: mockProduct.price,
      });
    });
  });
  
  it('ì¬ê³ ê°€ ì—†ìœ¼ë©´ í• ì¸ìœ¨ì„ 0ìœ¼ë¡œ ê³„ì‚°í•œë‹¤', () => {
    const { getByText } = render(
      <ProductCardContainer 
        product={{ ...mockProduct, stock: 0 }} 
      />
    );
    
    expect(getByText('SOLD OUT')).toBeInTheDocument();
  });
});
```

<Callout type="success" title="í…ŒìŠ¤íŠ¸ ê²©ë¦¬">
  Presenter í…ŒìŠ¤íŠ¸ëŠ” **API, Hook, ë¼ìš°í„° ë“±ì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**. Container í…ŒìŠ¤íŠ¸ëŠ” **DOM ë Œë”ë§ì— ì˜ì¡´í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤**.
  
  ê°ê°ì„ ë…ë¦½ì ìœ¼ë¡œ í…ŒìŠ¤íŠ¸í•  ìˆ˜ ìˆì–´, í…ŒìŠ¤íŠ¸ ì†ë„ê°€ ë¹ ë¥´ê³  ìœ ì§€ë³´ìˆ˜ê°€ ì‰½ìŠµë‹ˆë‹¤.
</Callout>

## 5. Storybookê³¼ì˜ ì™„ë²½í•œ ì¡°í•©

PresenterëŠ” Storybookê³¼ ì°°ë–¡ê¶í•©ì…ë‹ˆë‹¤. API ì—†ì´ë„ ëª¨ë“  UI ìƒíƒœë¥¼ ë¯¸ë¦¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
// ProductCardPresenter.stories.tsx
import type { Meta, StoryObj } from '@storybook/react';
import { ProductCardPresenter } from './ProductCardPresenter';

const meta: Meta<typeof ProductCardPresenter> = {
  title: 'Components/ProductCard',
  component: ProductCardPresenter,
  parameters: {
    layout: 'padded',
  },
};

export default meta;
type Story = StoryObj<typeof ProductCardPresenter>;

const mockProduct = {
  id: '1',
  name: 'MacBook Pro 16" M3 Max',
  price: 4690000,
  originalPrice: 5690000,
  image: '/macbook.jpg',
  stock: 5,
};

// ê¸°ë³¸ ìƒíƒœ
export const Default: Story = {
  args: {
    product: mockProduct,
    discount: 18,
    isOutOfStock: false,
    isLowStock: true,
    isInWishlist: false,
    isInCart: false,
    isAdding: false,
    onWishlistToggle: () => console.log('Wishlist toggled'),
    onAddToCart: () => console.log('Added to cart'),
    onClick: () => console.log('Product clicked'),
  },
};

// í’ˆì ˆ ìƒíƒœ
export const OutOfStock: Story = {
  args: {
    ...Default.args,
    product: { ...mockProduct, stock: 0 },
    isOutOfStock: true,
  },
};

// ì°œí•œ ìƒíƒœ
export const InWishlist: Story = {
  args: {
    ...Default.args,
    isInWishlist: true,
  },
};

// ì¥ë°”êµ¬ë‹ˆì— ë‹´ê¸´ ìƒíƒœ
export const InCart: Story = {
  args: {
    ...Default.args,
    isInCart: true,
  },
};

// ì¥ë°”êµ¬ë‹ˆì— ë‹´ëŠ” ì¤‘
export const Adding: Story = {
  args: {
    ...Default.args,
    isAdding: true,
  },
};

// í• ì¸ ì—†ìŒ
export const NoDiscount: Story = {
  args: {
    ...Default.args,
    product: { ...mockProduct, originalPrice: undefined },
    discount: 0,
  },
};

// ì¬ê³  ì¶©ë¶„
export const InStock: Story = {
  args: {
    ...Default.args,
    product: { ...mockProduct, stock: 100 },
    isLowStock: false,
  },
};
```

<Callout type="info" title="ë””ìì´ë„ˆì™€ í˜‘ì—…">
  ë””ìì´ë„ˆê°€ Storybookì„ ì—´ì–´ì„œ **ëª¨ë“  ìƒíƒœì˜ UIë¥¼ í™•ì¸**í•˜ê³ , í”¼ë“œë°±ì„ ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
  ê°œë°œìëŠ” APIë¥¼ êµ¬ì¶•í•˜ì§€ ì•Šì•„ë„, ë””ìì´ë„ˆëŠ” ì‹¤ì œ ë°ì´í„°ê°€ ì—†ì–´ë„ í˜‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
</Callout>

## 6. Next.js 15ì™€ Server Components

Next.js 15ì˜ Server Components í™˜ê²½ì—ì„œ Container/Presenter íŒ¨í„´ì€ ì–´ë–»ê²Œ ì ìš©ë ê¹Œìš”?

### íŒ¨í„´ 1: Server Component Container + Client Component Presenter

ì„œë²„ì—ì„œ ë°ì´í„°ë¥¼ í˜ì¹­í•˜ê³ , í´ë¼ì´ì–¸íŠ¸ì—ì„œ ì¸í„°ë™ì…˜ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

```tsx
// app/products/[id]/page.tsx (Server Component Container)
import { ProductDetailPresenter } from '@/components/ProductDetailPresenter';
import { fetchProduct, fetchRelatedProducts } from '@/lib/api';

interface ProductPageProps {
  params: { id: string };
}

export default async function ProductPage({ params }: ProductPageProps) {
  // ì„œë²„ì—ì„œ ë°ì´í„° í˜ì¹­ (ë³‘ë ¬ ì²˜ë¦¬)
  const [product, relatedProducts] = await Promise.all([
    fetchProduct(params.id),
    fetchRelatedProducts(params.id),
  ]);
  
  // í• ì¸ìœ¨ ê³„ì‚° (ì„œë²„ì—ì„œ)
  const discount = product.originalPrice
    ? Math.round((1 - product.price / product.originalPrice) * 100)
    : 0;
  
  // Client Componentì— ì „ë‹¬
  return (
    <ProductDetailPresenter
      product={product}
      relatedProducts={relatedProducts}
      discount={discount}
    />
  );
}
```

```tsx
// components/ProductDetailPresenter.tsx (Client Component)
'use client';

import { useState, useTransition } from 'react';
import { useRouter } from 'next/navigation';
import { addToCart } from '@/app/actions/cart';

interface ProductDetailPresenterProps {
  product: Product;
  relatedProducts: Product[];
  discount: number;
}

export function ProductDetailPresenter({
  product,
  relatedProducts,
  discount,
}: ProductDetailPresenterProps) {
  const router = useRouter();
  const [isPending, startTransition] = useTransition();
  const [quantity, setQuantity] = useState(1);
  
  const handleAddToCart = () => {
    startTransition(async () => {
      await addToCart(product.id, quantity);
      router.refresh(); // ì„œë²„ ë°ì´í„° ê°±ì‹ 
    });
  };
  
  return (
    <div className="container mx-auto px-4 py-8">
      <div className="grid grid-cols-1 lg:grid-cols-2 gap-8">
        {/* ìƒí’ˆ ì´ë¯¸ì§€ */}
        <div>
          <img
            src={product.image}
            alt={product.name}
            className="w-full rounded-lg"
          />
        </div>
        
        {/* ìƒí’ˆ ì •ë³´ */}
        <div>
          <h1 className="text-3xl font-bold mb-4">{product.name}</h1>
          
          {discount > 0 && (
            <div className="bg-red-500 text-white inline-block px-3 py-1 rounded-md font-bold mb-2">
              {discount}% OFF
            </div>
          )}
          
          <div className="flex items-center gap-3 mb-6">
            {product.originalPrice && (
              <span className="text-gray-400 line-through text-xl">
                {product.originalPrice.toLocaleString()}ì›
              </span>
            )}
            <span className="text-3xl font-bold">
              {product.price.toLocaleString()}ì›
            </span>
          </div>
          
          <p className="text-gray-600 mb-6">{product.description}</p>
          
          {/* ìˆ˜ëŸ‰ ì„ íƒ */}
          <div className="flex items-center gap-4 mb-6">
            <label className="font-semibold">ìˆ˜ëŸ‰:</label>
            <div className="flex items-center border rounded-lg">
              <button
                onClick={() => setQuantity(Math.max(1, quantity - 1))}
                className="px-4 py-2 hover:bg-gray-100"
              >
                -
              </button>
              <span className="px-4 py-2 min-w-[60px] text-center">
                {quantity}
              </span>
              <button
                onClick={() => setQuantity(quantity + 1)}
                className="px-4 py-2 hover:bg-gray-100"
              >
                +
              </button>
            </div>
          </div>
          
          {/* ì¥ë°”êµ¬ë‹ˆ ë²„íŠ¼ */}
          <button
            onClick={handleAddToCart}
            disabled={isPending}
            className="w-full py-3 bg-blue-500 text-white rounded-lg font-semibold hover:bg-blue-600 disabled:opacity-50"
          >
            {isPending ? 'ë‹´ëŠ” ì¤‘...' : 'ì¥ë°”êµ¬ë‹ˆ ë‹´ê¸°'}
          </button>
        </div>
      </div>
      
      {/* ê´€ë ¨ ìƒí’ˆ */}
      <div className="mt-12">
        <h2 className="text-2xl font-bold mb-6">ê´€ë ¨ ìƒí’ˆ</h2>
        <div className="grid grid-cols-2 md:grid-cols-4 gap-4">
          {relatedProducts.map(p => (
            <RelatedProductCard key={p.id} product={p} />
          ))}
        </div>
      </div>
    </div>
  );
}
```

### íŒ¨í„´ 2: Server Actionê³¼ í†µí•©

Server Actionì„ ì‚¬ìš©í•˜ì—¬ ì„œë²„ ë¡œì§ê³¼ í´ë¼ì´ì–¸íŠ¸ UIë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.

```tsx
// app/actions/product.ts
'use server';

import { revalidatePath } from 'next/cache';
import { db } from '@/lib/db';
import { auth } from '@/lib/auth';

export async function addToWishlist(productId: string) {
  const user = await auth();
  
  if (!user) {
    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
  }
  
  await db.wishlist.create({
    data: {
      userId: user.id,
      productId,
    },
  });
  
  revalidatePath('/products');
  return { success: true };
}

export async function removeFromWishlist(productId: string) {
  const user = await auth();
  
  if (!user) {
    throw new Error('ë¡œê·¸ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤');
  }
  
  await db.wishlist.deleteMany({
    where: {
      userId: user.id,
      productId,
    },
  });
  
  revalidatePath('/products');
  return { success: true };
}
```

```tsx
// components/WishlistButton.tsx (Client Component)
'use client';

import { useTransition } from 'react';
import { Heart } from 'lucide-react';
import { addToWishlist, removeFromWishlist } from '@/app/actions/product';

interface WishlistButtonProps {
  productId: string;
  isInWishlist: boolean;
}

export function WishlistButton({ productId, isInWishlist }: WishlistButtonProps) {
  const [isPending, startTransition] = useTransition();
  
  const handleToggle = () => {
    startTransition(async () => {
      try {
        if (isInWishlist) {
          await removeFromWishlist(productId);
        } else {
          await addToWishlist(productId);
        }
      } catch (error) {
        alert(error.message);
      }
    });
  };
  
  return (
    <button
      onClick={handleToggle}
      disabled={isPending}
      className="p-2 rounded-full bg-white/80 hover:bg-white transition-colors disabled:opacity-50"
    >
      <Heart
        className={`w-5 h-5 ${
          isInWishlist ? 'fill-red-500 text-red-500' : 'text-gray-600'
        }`}
      />
    </button>
  );
}
```

<Callout type="success" title="Server Componentsì˜ ì¥ì  í™œìš©">
  - **ContainerëŠ” Server Component**: ë°ì´í„° í˜ì¹­ì´ ì„œë²„ì—ì„œ ì´ë£¨ì–´ì ¸ ì´ˆê¸° ë¡œë”©ì´ ë¹ ë¦…ë‹ˆë‹¤
  - **PresenterëŠ” Client Component**: ì¸í„°ë™ì…˜ì´ í•„ìš”í•œ ë¶€ë¶„ë§Œ í´ë¼ì´ì–¸íŠ¸ë¡œ
  - **Server Action**: í¼ ì œì¶œ, CRUD ì‘ì—…ì„ íƒ€ì… ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
</Callout>

## 7. ì•ˆí‹°íŒ¨í„´ê³¼ ì£¼ì˜ì‚¬í•­

Container/Presenter íŒ¨í„´ë„ ì˜ëª» ì‚¬ìš©í•˜ë©´ ì˜¤íˆë ¤ ë³µì¡ë„ë§Œ ì¦ê°€í•©ë‹ˆë‹¤.

### ì•ˆí‹°íŒ¨í„´ 1: ê³¼ë„í•œ ë¶„ë¦¬

**ë¬¸ì œ:** ë‹¨ìˆœí•œ ì»´í¬ë„ŒíŠ¸ë„ ë¬´ì¡°ê±´ Container/Presenterë¡œ ë¶„ë¦¬

```tsx
// âŒ ë‚˜ìœ ì˜ˆ: ê³¼ë„í•œ ë¶„ë¦¬
// ButtonContainer.tsx
export function ButtonContainer({ onClick, children }) {
  const handleClick = () => {
    onClick();
  };
  
  return <ButtonPresenter onClick={handleClick}>{children}</ButtonPresenter>;
}

// ButtonPresenter.tsx
export function ButtonPresenter({ onClick, children }) {
  return <button onClick={onClick}>{children}</button>;
}
```

**í•´ê²°:**

```tsx
// âœ… ì¢‹ì€ ì˜ˆ: ë‹¨ìˆœí•œ ì»´í¬ë„ŒíŠ¸ëŠ” ê·¸ëƒ¥ í•˜ë‚˜ë¡œ
export function Button({ onClick, children }) {
  return (
    <button 
      onClick={onClick}
      className="px-4 py-2 bg-blue-500 text-white rounded"
    >
      {children}
    </button>
  );
}
```

<Callout type="warning" title="ë¶„ë¦¬ ê¸°ì¤€">
  ë‹¤ìŒ ì¡°ê±´ ì¤‘ 2ê°œ ì´ìƒ í•´ë‹¹ë  ë•Œë§Œ ë¶„ë¦¬ë¥¼ ê³ ë ¤í•˜ì„¸ìš”:
  - API í˜¸ì¶œì´ë‚˜ ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ê°€ í•„ìš”í•  ë•Œ
  - ê°™ì€ UIë¥¼ ë‹¤ë¥¸ ë°ì´í„° ì†ŒìŠ¤ì™€ í•¨ê»˜ ì‚¬ìš©í•´ì•¼ í•  ë•Œ
  - Storybookì—ì„œ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ë¥¼ ë¯¸ë¦¬ ë³´ê³  ì‹¶ì„ ë•Œ
  - ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¡œì§ì´ ê°ê° 50ì¤„ ì´ìƒì¼ ë•Œ
</Callout>

### ì•ˆí‹°íŒ¨í„´ 2: Presenterì— ë¡œì§ ë„£ê¸°

**ë¬¸ì œ:** Presenterì— ë°ì´í„° ê°€ê³µì´ë‚˜ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ í¬í•¨

```tsx
// âŒ ë‚˜ìœ ì˜ˆ: Presenterì— ë¡œì§ì´ ì„ì„
export function UserListPresenter({ users, onDelete }) {
  // Presenterì—ì„œ í•„í„°ë§ (âŒ)
  const activeUsers = users.filter(u => u.status === 'active');
  
  // Presenterì—ì„œ ì •ë ¬ (âŒ)
  const sortedUsers = [...activeUsers].sort((a, b) => 
    a.name.localeCompare(b.name)
  );
  
  return (
    <div>
      {sortedUsers.map(user => (
        <UserCard key={user.id} user={user} onDelete={onDelete} />
      ))}
    </div>
  );
}
```

**í•´ê²°:**

```tsx
// âœ… ì¢‹ì€ ì˜ˆ: Containerì—ì„œ ì²˜ë¦¬
export function UserListContainer() {
  const [users, setUsers] = useState([]);
  
  // Containerì—ì„œ í•„í„°ë§ ë° ì •ë ¬
  const processedUsers = useMemo(() => {
    const active = users.filter(u => u.status === 'active');
    return active.sort((a, b) => a.name.localeCompare(b.name));
  }, [users]);
  
  return (
    <UserListPresenter 
      users={processedUsers} 
      onDelete={handleDelete}
    />
  );
}

// âœ… PresenterëŠ” ìˆœìˆ˜í•˜ê²Œ ë Œë”ë§ë§Œ
export function UserListPresenter({ users, onDelete }) {
  return (
    <div>
      {users.map(user => (
        <UserCard key={user.id} user={user} onDelete={onDelete} />
      ))}
    </div>
  );
}
```

### ì•ˆí‹°íŒ¨í„´ 3: Props Drilling

**ë¬¸ì œ:** ì¤‘ê°„ Presenterë“¤ì´ ë¶ˆí•„ìš”í•œ propsë¥¼ ê³„ì† ì „ë‹¬

```tsx
// âŒ ë‚˜ìœ ì˜ˆ: Props Drilling
export function ProductListPresenter({ 
  products, 
  onEdit, 
  onDelete, 
  onWishlist,
  onCompare,
  onShare,
  // ... 10ê°œì˜ í•¸ë“¤ëŸ¬
}) {
  return (
    <div>
      {products.map(product => (
        <ProductCard
          product={product}
          onEdit={onEdit}
          onDelete={onDelete}
          onWishlist={onWishlist}
          onCompare={onCompare}
          onShare={onShare}
          // ... ê³„ì† ì „ë‹¬
        />
      ))}
    </div>
  );
}
```

**í•´ê²°: Context ì‚¬ìš©**

```tsx
// âœ… ì¢‹ì€ ì˜ˆ: Contextë¡œ í•´ê²°
const ProductActionsContext = createContext(null);

export function ProductListContainer() {
  const actions = {
    onEdit: handleEdit,
    onDelete: handleDelete,
    onWishlist: handleWishlist,
    onCompare: handleCompare,
    onShare: handleShare,
  };
  
  return (
    <ProductActionsContext.Provider value={actions}>
      <ProductListPresenter products={products} />
    </ProductActionsContext.Provider>
  );
}

// PresenterëŠ” ë‹¨ìˆœí•˜ê²Œ
export function ProductListPresenter({ products }) {
  return (
    <div>
      {products.map(product => (
        <ProductCard key={product.id} product={product} />
      ))}
    </div>
  );
}

// í•„ìš”í•œ ê³³ì—ì„œë§Œ useContext
function ProductCard({ product }) {
  const { onEdit, onDelete } = useContext(ProductActionsContext);
  // ...
}
```

### ì•ˆí‹°íŒ¨í„´ 4: ì˜ëª»ëœ ëª…ëª…

**ë¬¸ì œ:** Containerì™€ Presenterì˜ ì—­í• ì´ ëª…í™•í•˜ì§€ ì•Šì€ ì´ë¦„

```tsx
// âŒ ë‚˜ìœ ì˜ˆ
UserListLogic.tsx    // ë­˜ í•˜ëŠ” íŒŒì¼ì¸ì§€ ë¶ˆëª…í™•
UserListUI.tsx       // ë„ˆë¬´ ì¼ë°˜ì 
UserListView.tsx     // MVC íŒ¨í„´ê³¼ í˜¼ë™

// âœ… ì¢‹ì€ ì˜ˆ
UserListContainer.tsx   // ë¡œì§ ë‹´ë‹¹ ëª…í™•
UserListPresenter.tsx   // í”„ë ˆì  í…Œì´ì…˜ ë‹´ë‹¹ ëª…í™•

// ë˜ëŠ”
UserList.tsx           // Container
UserList.presenter.tsx // Presenter
```

## 8. ì‹¤ë¬´ íŒê³¼ Best Practices

### íŒ 1: Props íƒ€ì… ëª…í™•íˆ ì •ì˜

Presenterì˜ propsëŠ” **ì¸í„°í˜ì´ìŠ¤ë¡œ ëª…í™•íˆ ì •ì˜**í•˜ì„¸ìš”.

```tsx
// Presenter PropsëŠ” ë³„ë„ íŒŒì¼ë¡œ export
export interface UserCardPresenterProps {
  user: {
    id: string;
    name: string;
    email: string;
    avatar: string;
  };
  isSelected: boolean;
  onSelect: (userId: string) => void;
  onDelete: (userId: string) => void;
}

export function UserCardPresenter({
  user,
  isSelected,
  onSelect,
  onDelete,
}: UserCardPresenterProps) {
  // ...
}
```

ì´ë ‡ê²Œ í•˜ë©´:
- Storybookì—ì„œ íƒ€ì… ìë™ì™„ì„±
- ë‹¤ë¥¸ Containerì—ì„œ ì¬ì‚¬ìš© ì‹œ íƒ€ì… ì²´í¬
- Props ë¬¸ì„œí™”ê°€ ì‰¬ì›€

### íŒ 2: í´ë” êµ¬ì¡°

```
components/
  ProductCard/
    index.tsx                    # Container (export)
    ProductCard.presenter.tsx    # Presenter
    ProductCard.stories.tsx      # Storybook
    ProductCard.test.tsx         # Container í…ŒìŠ¤íŠ¸
    ProductCard.presenter.test.tsx  # Presenter í…ŒìŠ¤íŠ¸
    types.ts                     # ê³µí†µ íƒ€ì…
```

### íŒ 3: React.memoë¡œ ìµœì í™”

PresenterëŠ” ìˆœìˆ˜í•˜ë¯€ë¡œ `React.memo`ë¡œ ì‰½ê²Œ ìµœì í™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
export const UserCardPresenter = React.memo<UserCardPresenterProps>(
  function UserCardPresenter({ user, isSelected, onSelect, onDelete }) {
    return (
      <div className={isSelected ? 'selected' : ''}>
        <h3>{user.name}</h3>
        <p>{user.email}</p>
        <button onClick={() => onSelect(user.id)}>ì„ íƒ</button>
        <button onClick={() => onDelete(user.id)}>ì‚­ì œ</button>
      </div>
    );
  }
);
```

### íŒ 4: Custom Hookìœ¼ë¡œ ë¡œì§ ì¶”ì¶œ

Containerê°€ ë„ˆë¬´ ë³µì¡í•˜ë©´, ë¡œì§ì„ Custom Hookìœ¼ë¡œ ë¶„ë¦¬í•˜ì„¸ìš”.

```tsx
// hooks/useUserListLogic.ts
export function useUserListLogic() {
  const [users, setUsers] = useState<User[]>([]);
  const [loading, setLoading] = useState(true);
  const [search, setSearch] = useState('');
  
  useEffect(() => {
    fetchUsers().then(setUsers).finally(() => setLoading(false));
  }, []);
  
  const filteredUsers = useMemo(() => 
    users.filter(u => u.name.includes(search)),
    [users, search]
  );
  
  const handleDelete = useCallback(async (id: string) => {
    await deleteUser(id);
    setUsers(users.filter(u => u.id !== id));
  }, [users]);
  
  return {
    users: filteredUsers,
    loading,
    search,
    setSearch,
    handleDelete,
  };
}

// ContainerëŠ” ë‹¨ìˆœí•´ì§‘ë‹ˆë‹¤
export function UserListContainer() {
  const props = useUserListLogic();
  return <UserListPresenter {...props} />;
}
```

## 9. ë‹¤ë¥¸ íŒ¨í„´ê³¼ì˜ ë¹„êµ

<Tabs defaultValue="hookPattern">
  <TabsList>
    <TabsTrigger value="hookPattern">Custom Hook Pattern</TabsTrigger>
    <TabsTrigger value="hocPattern">HOC Pattern</TabsTrigger>
    <TabsTrigger value="compoundPattern">Compound Components</TabsTrigger>
  </TabsList>
  
  <TabsContent value="hookPattern">
    **Custom Hook Pattern**
    
    ë¡œì§ì„ Hookìœ¼ë¡œ ë¶„ë¦¬í•˜ê³ , ì»´í¬ë„ŒíŠ¸ëŠ” UIë§Œ ë‹´ë‹¹í•©ë‹ˆë‹¤.
    
    ```tsx
    // Custom Hook
    function useProductCard(product: Product) {
      const [isInCart, setIsInCart] = useState(false);
      
      const handleAddToCart = async () => {
        await addToCart(product.id);
        setIsInCart(true);
      };
      
      return { isInCart, handleAddToCart };
    }
    
    // Component
    function ProductCard({ product }: { product: Product }) {
      const { isInCart, handleAddToCart } = useProductCard(product);
      
      return (
        <div>
          <h3>{product.name}</h3>
          <button onClick={handleAddToCart}>
            {isInCart ? 'ë‹´ê¹€' : 'ë‹´ê¸°'}
          </button>
        </div>
      );
    }
    ```
    
    **ì°¨ì´ì :**
    - Hookì€ ë¡œì§ë§Œ ë¶„ë¦¬, UIëŠ” ê°™ì€ íŒŒì¼ì—
    - Container/PresenterëŠ” íŒŒì¼ ìì²´ë¥¼ ë¶„ë¦¬
    - Hookì€ ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì—ì„œ ë¡œì§ ì¬ì‚¬ìš©, PresenterëŠ” UI ì¬ì‚¬ìš©
    
    **ì–¸ì œ ì“¸ê¹Œ?**
    - Hook: ë¡œì§ë§Œ ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ
    - Container/Presenter: UIë„ ì¬ì‚¬ìš©í•˜ê³  ì‹¶ì„ ë•Œ
  </TabsContent>
  
  <TabsContent value="hocPattern">
    **HOC (Higher-Order Component) Pattern**
    
    ì»´í¬ë„ŒíŠ¸ë¥¼ ë°›ì•„ì„œ ìƒˆë¡œìš´ ì»´í¬ë„ŒíŠ¸ë¥¼ ë°˜í™˜í•©ë‹ˆë‹¤.
    
    ```tsx
    function withLoading<P>(Component: React.ComponentType<P>) {
      return function WithLoading(props: P & { loading: boolean }) {
        if (props.loading) {
          return <Spinner />;
        }
        return <Component {...props} />;
      };
    }
    
    const UserListWithLoading = withLoading(UserList);
    ```
    
    **ì°¨ì´ì :**
    - HOCëŠ” íš¡ë‹¨ ê´€ì‹¬ì‚¬(logging, auth, loading)ë¥¼ ì²˜ë¦¬
    - Container/PresenterëŠ” ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UIë¥¼ ë¶„ë¦¬
    
    **ì–¸ì œ ì“¸ê¹Œ?**
    - HOC: ì—¬ëŸ¬ ì»´í¬ë„ŒíŠ¸ì— ê³µí†µ ê¸°ëŠ¥ ì¶”ê°€ (ë¡œë”©, ì—ëŸ¬ í•¸ë“¤ë§)
    - Container/Presenter: íŠ¹ì • ì»´í¬ë„ŒíŠ¸ì˜ ë¡œì§/UI ë¶„ë¦¬
  </TabsContent>
  
  <TabsContent value="compoundPattern">
    **Compound Components Pattern**
    
    ì—¬ëŸ¬ ì„œë¸Œ ì»´í¬ë„ŒíŠ¸ê°€ Contextë¥¼ í†µí•´ ìƒíƒœë¥¼ ê³µìœ í•©ë‹ˆë‹¤.
    
    ```tsx
    <Dropdown>
      <Dropdown.Trigger>ì„ íƒ</Dropdown.Trigger>
      <Dropdown.Content>
        <Dropdown.Item value="1">í•­ëª© 1</Dropdown.Item>
        <Dropdown.Item value="2">í•­ëª© 2</Dropdown.Item>
      </Dropdown.Content>
    </Dropdown>
    ```
    
    **ì°¨ì´ì :**
    - CompoundëŠ” ì»´í¬ë„ŒíŠ¸ ê°„ ì•”ë¬µì  ìƒíƒœ ê³µìœ 
    - Container/PresenterëŠ” ëª…ì‹œì  props ì „ë‹¬
    
    **ì–¸ì œ ì“¸ê¹Œ?**
    - Compound: ë³µì¡í•œ UI êµ¬ì¡°ë¥¼ ìœ ì—°í•˜ê²Œ (Dropdown, Modal, Tabs)
    - Container/Presenter: ë°ì´í„° í˜ì¹­ê³¼ UI ë¶„ë¦¬ (ëª©ë¡, ì¹´ë“œ, ì°¨íŠ¸)
  </TabsContent>
</Tabs>

## 10. ì‹¤ì „ ì²´í¬ë¦¬ìŠ¤íŠ¸

<Steps>
  <Step title="ë¶„ë¦¬ í•„ìš”ì„± íŒë‹¨">
    - [ ] API í˜¸ì¶œì´ë‚˜ ë³µì¡í•œ ìƒíƒœ ê´€ë¦¬ê°€ ìˆë‚˜ìš”?
    - [ ] ê°™ì€ UIë¥¼ ë‹¤ë¥¸ ë°ì´í„°ë¡œ ì¬ì‚¬ìš©í•  ê°€ëŠ¥ì„±ì´ ìˆë‚˜ìš”?
    - [ ] Storybookì—ì„œ ë‹¤ì–‘í•œ ì¼€ì´ìŠ¤ë¥¼ ë³´ê³  ì‹¶ë‚˜ìš”?
    - [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¡œì§ì´ ê°ê° 50ì¤„ ì´ìƒì¸ê°€ìš”?
    
    **2ê°œ ì´ìƒ "ì˜ˆ"ë¼ë©´ ë¶„ë¦¬ë¥¼ ê³ ë ¤í•˜ì„¸ìš”.**
  </Step>
  
  <Step title="Container êµ¬í˜„">
    - [ ] ë°ì´í„° í˜ì¹­ (useQuery, fetch, Server Component)
    - [ ] ìƒíƒœ ê´€ë¦¬ (useState, useReducer, Zustand)
    - [ ] ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ (í•„í„°ë§, ì •ë ¬, ê³„ì‚°)
    - [ ] ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ (CRUD ì‘ì—…)
    - [ ] Presenterì— props ì „ë‹¬
  </Step>
  
  <Step title="Presenter êµ¬í˜„">
    - [ ] props íƒ€ì… ì •ì˜ (interface export)
    - [ ] ìˆœìˆ˜í•˜ê²Œ ë Œë”ë§ë§Œ (ë¡œì§ ì—†ìŒ)
    - [ ] ë¡œë”©/ì—ëŸ¬/ë¹ˆ ìƒíƒœ ì²˜ë¦¬
    - [ ] ìŠ¤íƒ€ì¼ë§ (Tailwind, CSS)
    - [ ] React.memo ìµœì í™” (í•„ìš”ì‹œ)
  </Step>
  
  <Step title="Storybook ì‘ì„±">
    - [ ] ì •ìƒ ìƒíƒœ
    - [ ] ë¡œë”© ìƒíƒœ
    - [ ] ì—ëŸ¬ ìƒíƒœ
    - [ ] ë¹ˆ ìƒíƒœ
    - [ ] ê·¹ë‹¨ì ì¸ ì¼€ì´ìŠ¤ (ë°ì´í„° ë§ì„ ë•Œ, ì—†ì„ ë•Œ)
  </Step>
  
  <Step title="í…ŒìŠ¤íŠ¸ ì‘ì„±">
    - [ ] Presenter: ìŠ¤ëƒ…ìƒ· í…ŒìŠ¤íŠ¸, UI ìƒíƒœ í…ŒìŠ¤íŠ¸
    - [ ] Container: ë¡œì§ í…ŒìŠ¤íŠ¸, API ëª¨í‚¹ í…ŒìŠ¤íŠ¸
  </Step>
</Steps>

## ë§ˆì¹˜ë©°

Container/Presenter íŒ¨í„´ì€ **ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬**ë¥¼ í†µí•´ ìœ ì§€ë³´ìˆ˜ì„±, ì¬ì‚¬ìš©ì„±, í…ŒìŠ¤íŠ¸ ìš©ì´ì„±ì„ ë†’ì´ëŠ” ê°•ë ¥í•œ íŒ¨í„´ì…ë‹ˆë‹¤.

### í•µì‹¬ ìš”ì•½

<div className="grid grid-cols-1 md:grid-cols-3 gap-4 my-6">
  <Card title="ë¶„ë¦¬ì˜ ì›ì¹™" icon={<Icon name="Split" className="text-blue-500" />}>
    ContainerëŠ” "ì–´ë–»ê²Œ ë™ì‘í•˜ëŠ”ê°€", PresenterëŠ” "ì–´ë–»ê²Œ ë³´ì´ëŠ”ê°€"ë¥¼ ë‹´ë‹¹í•©ë‹ˆë‹¤. ë‘ ê´€ì‹¬ì‚¬ë¥¼ ì„ì§€ ë§ˆì„¸ìš”.
  </Card>
  <Card title="ìˆœìˆ˜ì„± ìœ ì§€" icon={<Icon name="Sparkles" className="text-green-500" />}>
    PresenterëŠ” ìˆœìˆ˜ í•¨ìˆ˜ì²˜ëŸ¼ ë™ì‘í•´ì•¼ í•©ë‹ˆë‹¤. ê°™ì€ propsë©´ í•­ìƒ ê°™ì€ UIë¥¼ ë Œë”ë§í•˜ì„¸ìš”.
  </Card>
  <Card title="ê³¼ë„í•œ ë¶„ë¦¬ ì£¼ì˜" icon={<Icon name="AlertTriangle" className="text-orange-500" />}>
    ë‹¨ìˆœí•œ ì»´í¬ë„ŒíŠ¸ëŠ” ë¶„ë¦¬í•˜ì§€ ë§ˆì„¸ìš”. ë³µì¡ë„ê°€ ë†’ì„ ë•Œë§Œ íŒ¨í„´ì„ ì ìš©í•˜ì„¸ìš”.
  </Card>
</div>

### ì–¸ì œ ì‚¬ìš©í•˜ê³ , ì–¸ì œ í”¼í• ê¹Œ?

<Tabs defaultValue="use">
  <TabsList>
    <TabsTrigger value="use">ì‚¬ìš©í•´ì•¼ í•  ë•Œ</TabsTrigger>
    <TabsTrigger value="avoid">í”¼í•´ì•¼ í•  ë•Œ</TabsTrigger>
  </TabsList>
  
  <TabsContent value="use">
    **Container/Presenterë¥¼ ì‚¬ìš©í•˜ì„¸ìš”:**
    
    - âœ… ë³µì¡í•œ ë°ì´í„° í˜ì¹­ê³¼ ìƒíƒœ ê´€ë¦¬ê°€ ìˆì„ ë•Œ
    - âœ… ê°™ì€ UIë¥¼ ë‹¤ë¥¸ ë°ì´í„° ì†ŒìŠ¤ì™€ ì‚¬ìš©í•´ì•¼ í•  ë•Œ
    - âœ… Storybookìœ¼ë¡œ ëª¨ë“  UI ì¼€ì´ìŠ¤ë¥¼ ë¯¸ë¦¬ ë³´ê³  ì‹¶ì„ ë•Œ
    - âœ… ë””ìì´ë„ˆì™€ ê°œë°œìê°€ ë…ë¦½ì ìœ¼ë¡œ ì‘ì—…í•´ì•¼ í•  ë•Œ
    - âœ… ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ê³¼ UI ë¡œì§ì´ ê°ê° 50ì¤„ ì´ìƒì¼ ë•Œ
  </TabsContent>
  
  <TabsContent value="avoid">
    **Container/Presenterë¥¼ í”¼í•˜ì„¸ìš”:**
    
    - âŒ ë²„íŠ¼, ì…ë ¥ì°½ ê°™ì€ ë‹¨ìˆœí•œ UI ì»´í¬ë„ŒíŠ¸
    - âŒ í•œ ê³³ì—ì„œë§Œ ì‚¬ìš©í•˜ëŠ” ì¼íšŒì„± ì»´í¬ë„ŒíŠ¸
    - âŒ API í˜¸ì¶œì´ë‚˜ ë³µì¡í•œ ë¡œì§ì´ ì—†ëŠ” ì •ì  í˜ì´ì§€
    - âŒ íŒ€ì›ë“¤ì´ íŒ¨í„´ì— ìµìˆ™í•˜ì§€ ì•Šê³  í•™ìŠµ ì‹œê°„ì´ ë¶€ì¡±í•  ë•Œ
    - âŒ í”„ë¡œì íŠ¸ ê·œëª¨ê°€ ì‘ì•„ì„œ íŒŒì¼ ë¶„ë¦¬ê°€ ì˜¤íˆë ¤ ë³µì¡ë„ë¥¼ ë†’ì¼ ë•Œ
  </TabsContent>
</Tabs>

<Blockquote author="Robert C. Martin (Uncle Bob)" cite="Clean Architecture">
  The separation of concerns is the most important principle in software design. It allows us to understand, maintain, and extend our systems with minimal cognitive load.
</Blockquote>

ê´€ì‹¬ì‚¬ì˜ ë¶„ë¦¬ëŠ” ì†Œí”„íŠ¸ì›¨ì–´ ì„¤ê³„ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ ì›ì¹™ì…ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì‹œìŠ¤í…œì„ ì´í•´í•˜ê³ , ìœ ì§€ë³´ìˆ˜í•˜ê³ , í™•ì¥í•  ë•Œ ì¸ì§€ ë¶€í•˜ë¥¼ ìµœì†Œí™”í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

<Callout type="success" title="ë‹¤ìŒ ë‹¨ê³„">
  í˜„ì¬ í”„ë¡œì íŠ¸ì—ì„œ ê°€ì¥ ë³µì¡í•œ ì»´í¬ë„ŒíŠ¸ í•˜ë‚˜ë¥¼ ê³¨ë¼ë³´ì„¸ìš”. 
  ê·¸ê²ƒì„ Container/Presenterë¡œ ë¦¬íŒ©í† ë§í•˜ë©´ì„œ ì´ íŒ¨í„´ì˜ ì§„ê°€ë¥¼ ì²´ê°í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.
  
  íŠ¹íˆ ë‹¤ìŒê³¼ ê°™ì€ ì»´í¬ë„ŒíŠ¸ê°€ ì¢‹ì€ í›„ë³´ì…ë‹ˆë‹¤:
  - ì‚¬ìš©ì ëª©ë¡/ìƒí’ˆ ëª©ë¡ (í•„í„°ë§, ì •ë ¬, í˜ì´ì§€ë„¤ì´ì…˜)
  - ëŒ€ì‹œë³´ë“œ ìœ„ì ¯ (ì°¨íŠ¸, í†µê³„, ë°ì´í„° ì‹œê°í™”)
  - ë³µì¡í•œ í¼ (ë‹¤ë‹¨ê³„, ìœ íš¨ì„± ê²€ì‚¬, API ì—°ë™)
  - ìƒì„¸ í˜ì´ì§€ (íƒ­, ê´€ë ¨ í•­ëª©, ì¸í„°ë™ì…˜)
</Callout>

---

Container/Presenter íŒ¨í„´ì€ **"ê°ìì˜ ì—­í• ì— ì§‘ì¤‘"**í•˜ëŠ” ì² í•™ì…ë‹ˆë‹¤. ContainerëŠ” ë°ì´í„°ë¥¼, PresenterëŠ” UIë¥¼. 
ë‘ ì—­í• ì„ ëª…í™•íˆ ë¶„ë¦¬í•˜ë©´, ì½”ë“œëŠ” ë” ê¹”ë”í•´ì§€ê³ , í˜‘ì—…ì€ ë” íš¨ìœ¨ì ì´ë©°, ìœ ì§€ë³´ìˆ˜ëŠ” ë” ì‰¬ì›Œì§‘ë‹ˆë‹¤.

